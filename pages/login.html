<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>登录 - 教师视频俱乐部</title>
    <link rel="stylesheet" href="../css/styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .privacy-agreement {
            margin: 20px 0;
            padding: 16px;
            background: #f8f9fa;
            border-radius: 8px;
            border: 1px solid #e9ecef;
        }
        
        .privacy-checkbox {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            margin-bottom: 10px;
        }
        
        .privacy-checkbox input {
            margin-top: 3px;
        }
        
        .privacy-checkbox label {
            font-size: 14px;
            line-height: 1.5;
            color: #666;
            cursor: pointer;
        }
        
        .privacy-link {
            color: #1890ff;
            text-decoration: none;
            font-weight: 500;
        }
        
        .privacy-link:hover {
            text-decoration: underline;
        }
        
        .privacy-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .privacy-modal.active {
            display: flex;
        }
        
        .privacy-content {
            background: white;
            border-radius: 12px;
            width: 100%;
            max-width: 800px;
            max-height: 80vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
        
        .privacy-header {
            padding: 20px 24px;
            border-bottom: 1px solid #f0f0f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .privacy-header h3 {
            margin: 0;
            color: #333;
        }
        
        .privacy-body {
            padding: 24px;
            overflow-y: auto;
            flex: 1;
        }
        
        .privacy-body h4 {
            color: #333;
            margin: 20px 0 10px 0;
        }
        
        .privacy-body p, .privacy-body ul {
            color: #666;
            line-height: 1.6;
            margin-bottom: 15px;
        }
        
        .privacy-body ul {
            padding-left: 20px;
        }
        
        .privacy-body li {
            margin-bottom: 8px;
        }
        
        .privacy-footer {
            padding: 16px 24px;
            border-top: 1px solid #f0f0f0;
            text-align: right;
        }
        
        .close-btn {
            background: none;
            border: none;
            font-size: 20px;
            color: #999;
            cursor: pointer;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }
        
        .close-btn:hover {
            background: #f5f5f5;
            color: #666;
        }
        
        .agreement-date {
            font-size: 12px;
            color: #999;
            text-align: center;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div id="page-login" class="page active">
        <div class="login-container">
            <div class="floating-shape shape-1"></div>
            <div class="floating-shape shape-2"></div>
            <div class="login-card">
                <h2>教师视频俱乐部</h2>
                <p>专业教师协作发展平台</p>
                
                <div class="form-item">
                    <label class="required">用户名</label>
                    <input type="text" id="login-name" placeholder="请输入您的用户名" oninput="App.hideLoginError('login-name-error')">
                </div>
                
                <div class="form-item">
                    <label class="required">密码</label>
                    <input type="password" id="login-password" placeholder="请输入密码" oninput="App.hideLoginError('login-password-error')">
                </div>
                
                <!-- 隐私协议同意 -->
                <div class="privacy-agreement">
                    <div class="privacy-checkbox">
                        <input type="checkbox" id="privacy-agree">
                        <label for="privacy-agree">
                            我已阅读并同意
                            <a href="javascript:void(0);" class="privacy-link" onclick="showPrivacyPolicy()">
                                《隐私和数据使用说明》
                            </a>
                        </label>
                    </div>
                    <div class="error-message" id="privacy-error" style="display:none;">
                        <i class="fas fa-exclamation-circle"></i> 请同意隐私和数据使用说明
                    </div>
                </div>
                
                <button class="btn btn-primary" style="width: 100%; padding: 14px; font-size: 16px; margin-top: 10px;" onclick="App.login()">
                    <i class="fas fa-sign-in-alt"></i> 登录
                </button>
                
                <div style="margin-top: 28px; text-align: center; padding-top: 20px; border-top: 1px solid #f0f0f0;">
                    <p style="font-size: 15px; color: #666;">还没有账号？</p>
                    <button class="btn btn-outline" onclick="App.navigateTo('register')" style="margin-top: 8px; padding: 10px 24px;">
                        <i class="fas fa-user-plus"></i> 立即注册
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- 隐私政策模态框 -->
    <div id="privacy-modal" class="privacy-modal">
        <div class="privacy-content">
            <div class="privacy-header">
                <h3><i class="fas fa-shield-alt"></i> 隐私和数据使用说明</h3>
                <button class="close-btn" onclick="closePrivacyPolicy()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="privacy-body">
                <h4>1. 数据收集目的</h4>
                <p>为了提供更好的教学协作体验，我们会收集以下数据：</p>
                <ul>
                    <li><strong>账户信息</strong>：用户名、邮箱（如有）等注册信息</li>
                    <li><strong>教学行为数据</strong>：俱乐部创建与参与、任务完成情况、视频观看进度</li>
                    <li><strong>互动数据</strong>：评论、点赞、分享等社交互动行为</li>
                    <li><strong>设备信息</strong>：浏览器类型、设备型号、IP地址（用于安全防护）</li>
                </ul>
                
                <h4>2. 数据使用方式</h4>
                <p>我们承诺将您的数据用于：</p>
                <ul>
                    <li><strong>平台功能实现</strong>：提供俱乐部管理、任务发布、视频观看等核心功能</li>
                    <li><strong>个性化推荐</strong>：根据您的教学兴趣推荐相关俱乐部和内容</li>
                    <li><strong>平台优化</strong>：分析使用模式以改进产品体验</li>
                    <li><strong>安全保护</strong>：检测和防止欺诈、滥用等非法行为</li>
                </ul>
                
                <h4>3. 数据存储与保护</h4>
                <ul>
                    <li>所有数据均存储在加密的服务器中</li>
                    <li>采用行业标准的SSL/TLS加密传输技术</li>
                    <li>定期进行安全审计和漏洞扫描</li>
                    <li>访问权限严格控制，仅限必要人员访问</li>
                </ul>
                
                <h4>4. 数据共享政策</h4>
                <p>我们<strong>不会</strong>：</p>
                <ul>
                    <li>出售您的个人信息给第三方</li>
                    <li>未经您同意将数据用于商业广告</li>
                    <li>与无关第三方共享您的教学数据</li>
                </ul>
                <p>仅在以下情况可能共享数据：</p>
                <ul>
                    <li>法律要求或政府机构合法请求</li>
                    <li>保护平台、用户或公众的安全</li>
                    <li>与受信任的服务提供商合作（需签订保密协议）</li>
                </ul>
                
                <h4>5. 您的权利</h4>
                <ul>
                    <li><strong>访问权</strong>：查看我们收集的您的个人信息</li>
                    <li><strong>更正权</strong>：更正不准确或不完整的个人信息</li>
                    <li><strong>删除权</strong>：在特定条件下要求删除您的个人信息</li>
                    <li><strong>撤回同意权</strong>：随时撤回对数据处理的同意</li>
                    <li><strong>导出权</strong>：获取您的个人数据副本</li>
                </ul>
                
                <h4>6. 数据保留期限</h4>
                <ul>
                    <li>账户数据：在您使用期间持续保留，注销后30天内删除</li>
                    <li>行为数据：匿名化后用于分析，最长保留2年</li>
                    <li>日志数据：安全日志保留6个月，访问日志保留1年</li>
                </ul>
                
                <h4>7. 联系方式</h4>
                <p>如果您对隐私政策有任何疑问，或想行使您的权利，请联系：</p>
                <ul>
                    <li>邮箱：privacy@teachervideoclub.com</li>
                    <li>电话：400-xxx-xxxx</li>
                    <li>办公时间：周一至周五 9:00-18:00</li>
                </ul>
                
                <p style="color: #999; font-size: 12px; margin-top: 30px;">
                    本政策可能会不时更新，我们会在平台上发布最新版本，并通知您重大变更。
                </p>
            </div>
            <div class="privacy-footer">
                <button class="btn btn-primary" onclick="agreeAndClose()">
                    <i class="fas fa-check-circle"></i> 我已阅读并同意
                </button>
            </div>
        </div>
    </div>

    <script>
        // 页面特定的脚本可以放在这里
        document.addEventListener('DOMContentLoaded', function() {
            // 如果当前页面是登录页，自动聚焦到用户名输入框
            const loginInput = document.getElementById('login-name');
            if (loginInput) {
                setTimeout(() => loginInput.focus(), 100);
            }
            
            // 检查之前是否已同意隐私政策
            checkPreviousAgreement();
        });
        
        // 显示隐私政策
        function showPrivacyPolicy() {
            const modal = document.getElementById('privacy-modal');
            if (modal) {
                modal.classList.add('active');
                document.body.style.overflow = 'hidden';
            }
        }
        
        // 关闭隐私政策
        function closePrivacyPolicy() {
            const modal = document.getElementById('privacy-modal');
            if (modal) {
                modal.classList.remove('active');
                document.body.style.overflow = '';
            }
        }
        
        // 同意并关闭
        function agreeAndClose() {
            const checkbox = document.getElementById('privacy-agree');
            if (checkbox) {
                checkbox.checked = true;
                hidePrivacyError();
                closePrivacyPolicy();
                
                // 保存同意状态到本地存储
                if (window.Utils) {
                    Utils.saveToStorage('privacy_agreed', {
                        agreed: true,
                        agreedAt: new Date().toISOString(),
                        version: '2026-01'
                    });
                }
            }
        }
        
        // 检查之前的同意状态
        function checkPreviousAgreement() {
            if (window.Utils) {
                const privacyData = Utils.getFromStorage('privacy_agreed');
                if (privacyData && privacyData.agreed) {
                    const checkbox = document.getElementById('privacy-agree');
                    if (checkbox) {
                        checkbox.checked = true;
                    }
                }
            }
        }
        
        // 显示隐私错误
        function showPrivacyError() {
            const errorElement = document.getElementById('privacy-error');
            if (errorElement) {
                errorElement.style.display = 'block';
                
                // 滚动到错误位置
                errorElement.scrollIntoView({
                    behavior: 'smooth',
                    block: 'center'
                });
            }
        }
        
        // 隐藏隐私错误
        function hidePrivacyError() {
            const errorElement = document.getElementById('privacy-error');
            if (errorElement) {
                errorElement.style.display = 'none';
            }
        }
        
        // 点击隐私链接时也显示模态框
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('privacy-link')) {
                showPrivacyPolicy();
                e.preventDefault();
            }
        });
        
        // 监听复选框变化
        const privacyCheckbox = document.getElementById('privacy-agree');
        if (privacyCheckbox) {
            privacyCheckbox.addEventListener('change', function() {
                if (this.checked) {
                    hidePrivacyError();
                    
                    // 保存同意状态
                    if (window.Utils) {
                        Utils.saveToStorage('privacy_agreed', {
                            agreed: true,
                            agreedAt: new Date().toISOString(),
                            version: '2026-01'
                        });
                    }
                }
            });
        }
        
        // 点击模态框外部关闭
        const privacyModal = document.getElementById('privacy-modal');
        if (privacyModal) {
            privacyModal.addEventListener('click', function(e) {
                if (e.target === privacyModal) {
                    closePrivacyPolicy();
                }
            });
        }
        
        // ESC键关闭模态框
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closePrivacyPolicy();
            }
        });
    </script>
</body>
</html>