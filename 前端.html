<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>教师视频俱乐部平台</title>
    <!-- 引入图标库 -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary-color: #1890ff;
            --primary-light: #40a9ff;
            --primary-dark: #096dd9;
            --danger-color: #ff4d4f;
            --warning-color: #faad14;
            --success-color: #52c41a;
            --text-main: #333;
            --text-sub: #666;
            --bg-light: #f5f7fa;
            --border-color: #eee;
            --card-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
            --hover-shadow: 0 12px 32px rgba(0, 0, 0, 0.12);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'PingFang SC', 'Microsoft YaHei', 'Helvetica Neue', sans-serif; }
        body { background-color: var(--bg-light); color: var(--text-main); height: 100vh; display: flex; flex-direction: column; overflow-x: hidden; }

        /* 通用组件 */
        .btn { padding: 10px 20px; border-radius: 8px; border: none; cursor: pointer; font-size: 14px; transition: all 0.3s; font-weight: 500; display: inline-flex; align-items: center; justify-content: center; gap: 8px; }
        .btn-primary { background: linear-gradient(135deg, var(--primary-color), var(--primary-dark)); color: white; box-shadow: 0 4px 12px rgba(24, 144, 255, 0.3); }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 6px 16px rgba(24, 144, 255, 0.4); opacity: 0.95; }
        .btn-success { background: linear-gradient(135deg, var(--success-color), #389e0d); color: white; box-shadow: 0 4px 12px rgba(82, 196, 26, 0.3); }
        .btn-outline { background-color: white; border: 2px solid var(--primary-color); color: var(--primary-color); }
        .btn-outline:hover { background-color: rgba(24, 144, 255, 0.05); }
        .btn-text { background: none; color: var(--primary-color); padding: 0; }
        .btn-text:hover { color: var(--primary-dark); }
        
        /* 表单样式 */
        .form-item { margin-bottom: 20px; }
        .form-item label { display: block; margin-bottom: 8px; font-weight: 600; color: var(--text-main); font-size: 14px; }
        .form-item .required::after { content: " *"; color: var(--danger-color); }
        .form-item input, .form-item select, .form-item textarea { 
            width: 100%; 
            padding: 12px 16px; 
            border: 2px solid #e8e8e8; 
            border-radius: 8px; 
            font-size: 15px;
            transition: all 0.3s;
            background-color: white;
        }
        .form-item input:focus, .form-item select:focus, .form-item textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(24, 144, 255, 0.1);
        }
        .form-item input::placeholder {
            color: #bfbfbf;
        }
        
        .password-strength { height: 6px; margin-top: 8px; border-radius: 3px; background: #f0f0f0; overflow: hidden; position: relative; }
        .password-strength-bar { height: 100%; width: 0; transition: width 0.3s ease; position: absolute; left: 0; top: 0; }
        .strength-weak { background: linear-gradient(to right, #ff4d4f, #ff7875); }
        .strength-medium { background: linear-gradient(to right, #faad14, #ffc53d); }
        .strength-strong { background: linear-gradient(to right, #52c41a, #73d13d); }
        
        .error-message { color: var(--danger-color); font-size: 13px; margin-top: 6px; display: none; align-items: center; gap: 5px; }
        .success-message { color: var(--success-color); font-size: 13px; margin-top: 6px; display: none; align-items: center; gap: 5px; }
        
        /* 模态框 */
        .modal-overlay { 
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            background: rgba(0,0,0,0.5); 
            z-index: 2000; 
            display: none; 
            align-items: center; 
            justify-content: center; 
        }
        
        .modal { 
            background: white; 
            padding: 32px; 
            border-radius: 16px; 
            width: 480px; 
            max-width: 90%; 
            max-height: 80vh; 
            overflow-y: auto; 
            box-shadow: var(--card-shadow);
        }
        
        /* 布局控制 */
        .page { display: none; flex: 1; flex-direction: column; }
        .page.active { display: flex; }

        /* 头部样式 */
        .header { background: white; padding: 0 24px; height: 68px; display: flex; align-items: center; justify-content: space-between; box-shadow: 0 2px 12px rgba(0,0,0,0.06); position: sticky; top: 0; z-index: 100; }
        .header-left { font-size: 18px; font-weight: bold; display: flex; align-items: center; gap: 12px; }
        .header-left .platform-name { color: var(--primary-color); font-size: 22px; font-weight: 700; background: linear-gradient(135deg, var(--primary-color), #722ed1); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .header-right { display: flex; align-items: center; gap: 20px; }
        .user-info { display: flex; align-items: center; gap: 12px; padding: 4px 12px; border-radius: 20px; transition: background 0.3s; }
        .user-info:hover { background-color: rgba(0, 0, 0, 0.02); }
        .avatar { width: 40px; height: 40px; background: linear-gradient(135deg, var(--primary-color), #722ed1); border-radius: 50%; display: flex; align-items: center; justify-content: center; overflow: hidden; color: white; font-weight: bold; font-size: 16px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); }
        
        /* --- 登录页面 --- */
        .login-container { 
            display: flex; 
            flex: 1; 
            align-items: center; 
            justify-content: center; 
            background: linear-gradient(135deg, #f5f7fa 0%, #e4edf5 100%);
            position: relative;
            overflow: hidden;
        }
        
        .login-container::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(24, 144, 255, 0.05) 0%, transparent 70%);
            z-index: 0;
        }
        
        .login-card { 
            background: white; 
            padding: 48px; 
            border-radius: 20px; 
            width: 480px; 
            max-width: 90%; 
            box-shadow: var(--card-shadow);
            position: relative;
            z-index: 1;
            border: 1px solid rgba(0, 0, 0, 0.05);
        }
        
        .login-card h2 { 
            margin-bottom: 12px; 
            color: var(--text-main); 
            font-size: 28px;
            font-weight: 700;
            text-align: center;
            background: linear-gradient(135deg, var(--primary-color), #722ed1);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .login-card p { 
            color: var(--text-sub); 
            margin-bottom: 36px; 
            text-align: center;
            font-size: 15px;
        }
        
        .role-selector { display: flex; gap: 16px; margin-bottom: 30px; }
        .role-option { 
            flex: 1; 
            padding: 24px 16px; 
            border: 2px solid #f0f0f0; 
            border-radius: 12px; 
            cursor: pointer; 
            transition: all 0.3s; 
            text-align: center;
            background: white;
        }
        .role-option:hover { 
            border-color: var(--primary-light); 
            transform: translateY(-4px);
            box-shadow: 0 8px 20px rgba(24, 144, 255, 0.15);
        }
        .role-option.selected { 
            border-color: var(--primary-color); 
            background-color: rgba(24, 144, 255, 0.04);
            box-shadow: 0 6px 16px rgba(24, 144, 255, 0.15);
        }
        .role-option i { 
            font-size: 40px; 
            margin-bottom: 12px; 
            background: linear-gradient(135deg, var(--primary-color), #722ed1);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .role-option h3 { 
            margin-bottom: 8px; 
            font-size: 16px;
            color: var(--text-main);
        }
        .role-option p { 
            font-size: 13px; 
            margin: 0; 
            color: var(--text-sub); 
            line-height: 1.5;
        }
        
        /* --- 注册页面 --- */
        .register-container { 
            display: flex; 
            flex: 1; 
            align-items: center; 
            justify-content: center; 
            background: linear-gradient(135deg, #f0f7ff 0%, #e6f7ff 100%);
            position: relative;
            overflow: hidden;
        }
        
        .register-container::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(114, 46, 209, 0.05) 0%, transparent 70%);
            z-index: 0;
        }
        
        .register-card { 
            background: white; 
            padding: 48px; 
            border-radius: 20px; 
            width: 520px; 
            max-width: 90%; 
            box-shadow: var(--card-shadow);
            position: relative;
            z-index: 1;
            border: 1px solid rgba(0, 0, 0, 0.05);
        }
        
        .register-card h2 { 
            margin-bottom: 12px; 
            font-size: 28px;
            font-weight: 700;
            text-align: center;
            background: linear-gradient(135deg, #722ed1, var(--primary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .register-card p { 
            color: var(--text-sub); 
            margin-bottom: 36px; 
            text-align: center;
            font-size: 15px;
        }
        
        /* --- 页面1: 我的俱乐部 --- */
        .club-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); 
            gap: 24px; 
            padding: 32px; 
        }
        
        .club-card { 
            background: white; 
            border-radius: 16px; 
            padding: 24px; 
            box-shadow: var(--card-shadow); 
            transition: all 0.4s;
            border: 1px solid rgba(0, 0, 0, 0.05);
            position: relative;
            overflow: hidden;
        }
        
        .club-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-color), #722ed1);
        }
        
        .club-card:hover { 
            transform: translateY(-8px); 
            box-shadow: var(--hover-shadow);
        }
        
        .club-card h3 { 
            margin-bottom: 12px; 
            font-size: 20px;
            color: var(--text-main);
            font-weight: 700;
        }
        
        .club-tags { margin-bottom: 20px; display: flex; flex-wrap: wrap; gap: 8px; }
        .tag { 
            background: linear-gradient(135deg, #e6f7ff, #bae7ff); 
            color: var(--primary-dark); 
            padding: 4px 12px; 
            border-radius: 20px; 
            font-size: 13px; 
            font-weight: 500;
        }
        
        .club-actions { display: flex; gap: 12px; margin-top: 20px; }
        
        .empty-state { 
            text-align: center; 
            padding: 80px 20px; 
            color: var(--text-sub);
            grid-column: 1 / -1;
        }
        
        .empty-state i { 
            font-size: 64px; 
            margin-bottom: 20px; 
            color: #e8e8e8;
            opacity: 0.7;
        }
        
        .empty-state h3 {
            font-size: 20px;
            margin-bottom: 12px;
            color: var(--text-sub);
        }
        
        /* --- 页面2: 视频列表 --- */
        .video-list { 
            padding: 32px; 
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); 
            gap: 24px; 
        }
        
        .video-card { 
            background: white; 
            border-radius: 16px; 
            overflow: hidden; 
            position: relative; 
            cursor: pointer; 
            box-shadow: var(--card-shadow);
            transition: all 0.4s;
            border: 1px solid rgba(0, 0, 0, 0.05);
        }
        
        .video-card:hover { 
            transform: translateY(-6px); 
            box-shadow: var(--hover-shadow);
        }
        
        .video-cover { 
            height: 160px; 
            background: linear-gradient(135deg, #333, #555); 
            position: relative; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            color: white; 
            overflow: hidden;
        }
        
        .video-cover::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(24, 144, 255, 0.2), rgba(114, 46, 209, 0.2));
        }
        
        .video-cover i { 
            font-size: 48px; 
            z-index: 1;
            text-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        .video-info { padding: 20px; }
        .video-title { 
            font-weight: 600; 
            margin-bottom: 8px; 
            white-space: nowrap; 
            overflow: hidden; 
            text-overflow: ellipsis;
            font-size: 16px;
            color: var(--text-main);
        }
        
        .video-meta { 
            font-size: 13px; 
            color: var(--text-sub); 
            display: flex; 
            justify-content: space-between;
        }
        
        /* --- 页面3: 任务页 --- */
        .task-page-container { padding: 32px; }
        
        /* 任务页头部样式 */
        .task-page-header {
            background: white;
            padding: 28px;
            border-radius: 16px;
            box-shadow: var(--card-shadow);
            margin-bottom: 32px;
            border: 1px solid rgba(0, 0, 0, 0.05);
            position: relative;
            overflow: hidden;
        }
        
        .task-page-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-color), #722ed1);
        }
        
        .task-header-content {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }
        
        .task-header-left {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }
        
        .task-video-title {
            font-size: 24px;
            font-weight: 700;
            color: var(--text-main);
            display: flex;
            align-items: center;
            gap: 20px;
            flex-wrap: wrap;
        }
        
        .task-video-info {
            font-size: 15px;
            color: var(--text-sub);
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .task-permission-tag {
            display: inline-block;
            background: linear-gradient(135deg, #f6ffed, #d9f7be);
            color: #389e0d;
            font-size: 13px;
            padding: 6px 12px;
            border-radius: 20px;
            white-space: nowrap;
            width: fit-content;
            font-weight: 500;
        }
        
        .task-list-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(340px, 1fr));
            gap: 24px;
        }
        
        .task-card-item {
            background: white;
            border-radius: 16px;
            box-shadow: var(--card-shadow);
            padding: 24px;
            transition: all 0.4s ease;
            position: relative;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            height: 240px;
            border: 1px solid rgba(0, 0, 0, 0.05);
        }
        
        .task-card-item:hover {
            transform: translateY(-8px);
            box-shadow: var(--hover-shadow);
        }
        
        .task-card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 20px;
        }
        
        .task-card-title {
            font-weight: 700;
            font-size: 18px;
            color: var(--text-main);
        }
        
        .task-card-status {
            font-size: 13px;
            padding: 6px 12px;
            border-radius: 20px;
            font-weight: 500;
        }
        
        .task-status-incomplete {
            background: linear-gradient(135deg, #fafafa, #f0f0f0);
            color: var(--text-sub);
        }
        
        .task-status-complete {
            background: linear-gradient(135deg, #f6ffed, #d9f7be);
            color: #389e0d;
        }
        
        .task-card-description {
            font-size: 15px;
            color: var(--text-sub);
            margin-bottom: 20px;
            flex-grow: 1;
            line-height: 1.6;
        }
        
        .task-card-actions {
            margin-top: auto;
            display: flex;
            justify-content: space-between;
            gap: 12px;
        }
        
        .action-buttons {
            display: flex;
            gap: 12px;
            width: 100%;
        }
        
        .action-buttons .btn {
            flex: 1;
            padding: 12px 16px;
        }
        
        /* 通知消息 */
        .task-notification {
            position: fixed;
            top: 24px;
            right: 24px;
            padding: 16px 24px;
            border-radius: 12px;
            box-shadow: 0 8px 24px rgba(0,0,0,0.12);
            z-index: 2100;
            max-width: 400px;
            display: none;
            animation: slideIn 0.3s ease;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .task-notification.success {
            background: linear-gradient(135deg, rgba(82, 196, 26, 0.95), rgba(56, 158, 13, 0.95));
            color: white;
            border: 1px solid rgba(82, 196, 26, 0.3);
        }
        
        .task-notification.info {
            background: linear-gradient(135deg, rgba(24, 144, 255, 0.95), rgba(9, 109, 217, 0.95));
            color: white;
            border: 1px solid rgba(24, 144, 255, 0.3);
        }
        
        .task-notification.error {
            background: linear-gradient(135deg, rgba(255, 77, 79, 0.95), rgba(207, 19, 34, 0.95));
            color: white;
            border: 1px solid rgba(255, 77, 79, 0.3);
        }
        
        /* 响应式设计 */
        @media (max-width: 768px) {
            .task-header-content {
                flex-direction: column;
                gap: 20px;
            }
            
            .task-video-title {
                flex-direction: column;
                align-items: flex-start;
                gap: 8px;
            }
            
            .task-list-container {
                grid-template-columns: 1fr;
            }
            
            .task-card-actions {
                flex-direction: column;
                gap: 12px;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .role-selector {
                flex-direction: column;
            }
            
            .login-card, .register-card {
                padding: 32px 24px;
            }
            
            .club-grid, .video-list {
                padding: 20px;
            }
        }
        
        /* 装饰元素 */
        .floating-shape {
            position: absolute;
            border-radius: 50%;
            background: linear-gradient(135deg, rgba(24, 144, 255, 0.1), rgba(114, 46, 209, 0.1));
            z-index: 0;
        }
        
        .shape-1 {
            width: 200px;
            height: 200px;
            top: -100px;
            left: -100px;
        }
        
        .shape-2 {
            width: 150px;
            height: 150px;
            bottom: -75px;
            right: -75px;
        }
        
        /* 加载状态 */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid #f3f3f3;
            border-top: 2px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.8);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 3000;
        }
    </style>
</head>
<body>

    <!-- 登录页面 -->
    <div id="page-login" class="page active">
        <div class="login-container">
            <div class="floating-shape shape-1"></div>
            <div class="floating-shape shape-2"></div>
            <div class="login-card">
                <h2>教师视频俱乐部</h2>
                <p>专业教师协作发展平台</p>
                
                <div class="form-item">
                    <label class="required">姓名</label>
                    <input type="text" id="login-name" placeholder="请输入您的姓名">
                    <div class="error-message" id="login-name-error">
                        <i class="fas fa-exclamation-circle"></i> 请输入姓名
                    </div>
                </div>
                
                <div class="form-item">
                    <label class="required">密码</label>
                    <input type="password" id="login-password" placeholder="请输入密码">
                    <div class="error-message" id="login-password-error">
                        <i class="fas fa-exclamation-circle"></i> 请输入密码
                    </div>
                </div>
                
                <div class="form-item">
                    <label class="required">身份选择</label>
                    <div class="role-selector">
                        <div class="role-option selected" data-role="initiator" onclick="selectLoginRole('initiator')">
                            <i class="fas fa-user-tie"></i>
                            <h3>俱乐部发起人</h3>
                            <p>创建和管理俱乐部，查看任务完成情况</p>
                        </div>
                        <div class="role-option" data-role="participant" onclick="selectLoginRole('participant')">
                            <i class="fas fa-users"></i>
                            <h3>俱乐部参与人</h3>
                            <p>加入俱乐部，完成任务并标记完成</p>
                        </div>
                    </div>
                </div>
                
                <button class="btn btn-primary" style="width: 100%; padding: 14px; font-size: 16px; margin-top: 10px;" onclick="login()">
                    <i class="fas fa-sign-in-alt"></i> 登录
                </button>
                
                <div style="margin-top: 28px; text-align: center; padding-top: 20px; border-top: 1px solid #f0f0f0;">
                    <p style="font-size: 15px; color: #666;">还没有账号？</p>
                    <button class="btn btn-outline" onclick="navTo('page-register')" style="margin-top: 8px; padding: 10px 24px;">
                        <i class="fas fa-user-plus"></i> 立即注册
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- 注册页面 -->
    <div id="page-register" class="page">
        <div class="register-container">
            <div class="floating-shape shape-1"></div>
            <div class="floating-shape shape-2"></div>
            <div class="register-card">
                <h2>注册新账号</h2>
                <p>创建您的教师视频俱乐部账号</p>
                
                <div class="form-item">
                    <label class="required">姓名</label>
                    <input type="text" id="register-name" placeholder="请输入您的姓名" oninput="checkRegisterName()">
                    <div class="error-message" id="register-name-error">
                        <i class="fas fa-exclamation-circle"></i> <span id="register-name-error-text">姓名不能为空</span>
                    </div>
                    <div class="success-message" id="register-name-success">
                        <i class="fas fa-check-circle"></i> 姓名可用
                    </div>
                </div>
                
                <div class="form-item">
                    <label class="required">密码</label>
                    <input type="password" id="register-password" placeholder="请输入密码（至少6位）" oninput="checkPasswordStrength()">
                    <div class="password-strength">
                        <div class="password-strength-bar" id="password-strength-bar"></div>
                    </div>
                    <div class="error-message" id="register-password-error">
                        <i class="fas fa-exclamation-circle"></i> 密码至少需要6位
                    </div>
                </div>
                
                <div class="form-item">
                    <label class="required">确认密码</label>
                    <input type="password" id="register-confirm-password" placeholder="请再次输入密码" oninput="checkPasswordMatch()">
                    <div class="error-message" id="register-confirm-error">
                        <i class="fas fa-exclamation-circle"></i> 两次输入的密码不一致
                    </div>
                    <div class="success-message" id="register-confirm-success">
                        <i class="fas fa-check-circle"></i> 密码匹配
                    </div>
                </div>
                
                <div class="form-item">
                    <label class="required">身份选择</label>
                    <div class="role-selector">
                        <div class="role-option selected" data-role="initiator" onclick="selectRegisterRole('initiator')">
                            <i class="fas fa-user-tie"></i>
                            <h3>俱乐部发起人</h3>
                            <p>创建和管理俱乐部，查看任务完成情况</p>
                        </div>
                        <div class="role-option" data-role="participant" onclick="selectRegisterRole('participant')">
                            <i class="fas fa-users"></i>
                            <h3>俱乐部参与人</h3>
                            <p>加入俱乐部，完成任务并标记完成</p>
                        </div>
                    </div>
                </div>
                
                <button class="btn btn-primary" style="width: 100%; padding: 14px; font-size: 16px; margin-top: 10px;" onclick="register()">
                    <i class="fas fa-user-plus"></i> 注册
                </button>
                
                <div style="margin-top: 28px; text-align: center; padding-top: 20px; border-top: 1px solid #f0f0f0;">
                    <p style="font-size: 15px; color: #666;">已有账号？</p>
                    <button class="btn btn-outline" onclick="navTo('page-login')" style="margin-top: 8px; padding: 10px 24px;">
                        <i class="fas fa-arrow-left"></i> 返回登录
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- 页面1：我的俱乐部 (首页) -->
    <div id="page-home" class="page">
        <div class="header">
            <div class="header-left">
                <span class="platform-name">教师视频俱乐部</span>
                <span style="color: #999; font-weight: normal;"> | 我的俱乐部</span>
            </div>
            <div class="header-right">
                <div class="user-info">
                    <div class="avatar" id="user-avatar"></div>
                    <span id="user-name-display"></span>
                    <button class="btn btn-text" onclick="logout()" style="margin-left: 10px;">退出</button>
                </div>
            </div>
        </div>
        <div class="club-grid" id="club-list">
            <!-- 俱乐部卡片由后端API返回数据渲染 -->
        </div>
    </div>

    <!-- 页面2：视频列表 -->
    <div id="page-videos" class="page">
        <div class="header">
            <div class="header-left">
                <button class="btn btn-text" onclick="navTo('page-home')" style="margin-right:10px;"><i class="fas fa-arrow-left"></i></button>
                <span class="platform-name">教师视频俱乐部</span>
                <span style="color: #999; font-weight: normal;"> | </span>
                <span id="club-video-name"></span>
            </div>
            <div class="header-right">
                <div class="user-info">
                    <div class="avatar" id="video-user-avatar"></div>
                    <span id="video-user-name"></span>
                </div>
            </div>
        </div>
        <div class="video-list" id="video-list">
            <!-- 视频卡片由后端API返回数据渲染 -->
        </div>
    </div>

    <!-- 页面3：任务页 -->
    <div id="page-task" class="page">
        <div class="header">
            <div class="header-left">
                <button class="btn btn-text" onclick="navTo('page-videos')" style="margin-right:10px;"><i class="fas fa-arrow-left"></i></button>
                <span class="platform-name">教师视频俱乐部</span>
                <span style="color: #999; font-weight: normal;"> | 视频任务管理</span>
            </div>
            <div class="header-right">
                <div class="user-info">
                    <div class="avatar" id="task-user-avatar"></div>
                    <span id="task-user-name"></span>
                </div>
            </div>
        </div>
        
        <div class="task-page-container">
            <!-- 任务页头部 -->
            <div class="task-page-header">
                <div class="task-header-content">
                    <div class="task-header-left">
                        <div class="task-video-title">
                            <span style="font-size: 20px;">教师视频俱乐部</span>
                            <span class="task-video-title-text" id="task-video-title"></span>
                            <span class="task-video-info" id="task-video-info">
                                <i class="far fa-clock"></i> 视频时长：
                            </span>
                        </div>
                        <div class="task-permission-tag">
                            <i class="fas fa-user-check"></i> 参与俱乐部・任务完成系统
                        </div>
                    </div>
                    <div class="header-right">
                        <div class="user-info">
                            <div class="avatar" id="task-page-avatar"></div>
                            <span id="task-user-display"></span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 任务列表 -->
            <div class="task-list-container" id="taskList">
                <!-- 任务卡片由后端API返回数据渲染 -->
            </div>
        </div>
    </div>

    <!-- 创建俱乐部模态框 -->
    <div id="create-club-modal" class="modal-overlay">
        <div class="modal">
            <h3 style="margin-bottom: 24px;">创建俱乐部</h3>
            <div class="form-item">
                <label class="required">俱乐部名称</label>
                <input type="text" id="new-club-name" placeholder="请输入俱乐部名称">
                <div class="error-message" id="club-name-error"></div>
            </div>
            <div class="form-item">
                <label class="required">俱乐部标签</label>
                <select id="new-club-tag">
                    <option value="">选择标签</option>
                    <option value="数学">数学</option>
                    <option value="语文">语文</option>
                    <option value="英语">英语</option>
                    <option value="物理">物理</option>
                    <option value="化学">化学</option>
                    <option value="生物">生物</option>
                    <option value="教学法">教学法</option>
                </select>
            </div>
            <div class="form-item">
                <label>俱乐部简介</label>
                <textarea id="new-club-desc" rows="3" placeholder="请简要描述俱乐部主题和目的..."></textarea>
            </div>
            <div style="text-align:right; margin-top: 24px;">
                <button class="btn btn-outline" onclick="closeModal('create-club-modal')">取消</button>
                <button class="btn btn-primary" onclick="createClub()">创建俱乐部</button>
            </div>
        </div>
    </div>

    <!-- 加入俱乐部模态框 -->
    <div id="join-club-modal" class="modal-overlay">
        <div class="modal">
            <h3 style="margin-bottom: 24px;">加入俱乐部</h3>
            <div class="form-item">
                <label>搜索俱乐部</label>
                <input type="text" id="search-club-input" placeholder="输入俱乐部名称或标签...">
            </div>
            <div style="text-align:right; margin-bottom: 20px;">
                <button class="btn btn-primary" onclick="searchClubs()">搜索</button>
            </div>
            <div id="search-results" style="max-height: 300px; overflow-y: auto;">
                <!-- 搜索结果由后端API返回 -->
            </div>
            <div style="text-align:right; margin-top: 20px;">
                <button class="btn btn-outline" onclick="closeModal('join-club-modal')">关闭</button>
            </div>
        </div>
    </div>

    <!-- 任务通知消息 -->
    <div class="task-notification" id="taskNotification"></div>

    <!-- 全局加载指示器 -->
    <div class="loading-overlay" id="loadingOverlay">
        <div style="text-align: center;">
            <div class="loading" style="width: 40px; height: 40px; margin-bottom: 16px;"></div>
            <p>加载中...</p>
        </div>
    </div>

    <script>
        // ================ 全局配置 ================
        const API_BASE_URL = 'http://localhost:3000/api'; // 后端API基础URL
        
        // ================ 全局状态 ================
        let currentUser = null;
        let currentToken = null;
        let selectedLoginRole = "initiator";
        let selectedRegisterRole = "initiator";
        let currentClubId = null;
        let currentVideoId = null;
        let currentClubInfo = null;
        let currentVideoInfo = null;

        // ================ 初始化 ================
        function init() {
            // 检查是否有登录token
            const token = localStorage.getItem('auth_token');
            if (token) {
                // 验证token是否有效
                verifyToken(token);
            } else {
                navTo('page-login');
            }
        }

        // ================ API调用辅助函数 ================
        async function apiRequest(endpoint, method = 'GET', data = null, requiresAuth = true) {
            const url = `${API_BASE_URL}${endpoint}`;
            const headers = {
                'Content-Type': 'application/json',
            };
            
            if (requiresAuth && currentToken) {
                headers['Authorization'] = `Bearer ${currentToken}`;
            }
            
            const options = {
                method,
                headers,
                credentials: 'include' // 如果需要cookie
            };
            
            if (data && (method === 'POST' || method === 'PUT' || method === 'PATCH')) {
                options.body = JSON.stringify(data);
            }
            
            try {
                showLoading();
                const response = await fetch(url, options);
                
                if (response.status === 401) {
                    // token过期或无效
                    logout();
                    return null;
                }
                
                if (!response.ok) {
                    const error = await response.json();
                    throw new Error(error.message || '请求失败');
                }
                
                const result = await response.json();
                return result;
            } catch (error) {
                console.error('API请求错误:', error);
                showNotification(error.message || '网络错误，请重试', 'error');
                return null;
            } finally {
                hideLoading();
            }
        }

        // ================ 工具函数 ================
        function showLoading() {
            document.getElementById('loadingOverlay').style.display = 'flex';
        }

        function hideLoading() {
            document.getElementById('loadingOverlay').style.display = 'none';
        }

        function showNotification(message, type = 'info') {
            const notification = document.getElementById('taskNotification');
            notification.textContent = message;
            notification.className = `task-notification ${type}`;
            notification.style.display = 'block';
            
            setTimeout(() => {
                notification.style.display = 'none';
            }, 3000);
        }

        function navTo(pageId) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
        }

        function openModal(modalId) {
            document.getElementById(modalId).style.display = 'flex';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        // ================ 登录注册功能 ================
        function selectLoginRole(role) {
            selectedLoginRole = role;
            document.querySelectorAll('#page-login .role-option').forEach(option => {
                option.classList.remove('selected');
            });
            document.querySelector(`#page-login .role-option[data-role="${role}"]`).classList.add('selected');
        }

        function selectRegisterRole(role) {
            selectedRegisterRole = role;
            document.querySelectorAll('#page-register .role-option').forEach(option => {
                option.classList.remove('selected');
            });
            document.querySelector(`#page-register .role-option[data-role="${role}"]`).classList.add('selected');
        }

        async function verifyToken(token) {
            const result = await apiRequest('/auth/verify', 'POST', { token }, false);
            if (result && result.valid) {
                currentToken = token;
                currentUser = result.user;
                updateUserDisplay();
                loadUserClubs();
                navTo('page-home');
            } else {
                localStorage.removeItem('auth_token');
                navTo('page-login');
            }
        }

        async function login() {
            const name = document.getElementById('login-name').value.trim();
            const password = document.getElementById('login-password').value.trim();
            
            if (!name || !password) {
                showNotification('请输入完整的登录信息', 'error');
                return;
            }
            
            const result = await apiRequest('/auth/login', 'POST', {
                username: name,
                password: password,
                role: selectedLoginRole
            }, false);
            
            if (result && result.token) {
                currentToken = result.token;
                currentUser = result.user;
                localStorage.setItem('auth_token', result.token);
                updateUserDisplay();
                showNotification('登录成功', 'success');
                loadUserClubs();
                navTo('page-home');
            }
        }

        async function register() {
            const name = document.getElementById('register-name').value.trim();
            const password = document.getElementById('register-password').value;
            const confirmPassword = document.getElementById('register-confirm-password').value;
            
            // 前端验证
            if (!name || !password || !confirmPassword) {
                showNotification('请填写完整的注册信息', 'error');
                return;
            }
            
            if (password !== confirmPassword) {
                showNotification('两次输入的密码不一致', 'error');
                return;
            }
            
            if (password.length < 6) {
                showNotification('密码至少需要6位', 'error');
                return;
            }
            
            const result = await apiRequest('/auth/register', 'POST', {
                username: name,
                password: password,
                role: selectedRegisterRole
            }, false);
            
            if (result && result.success) {
                showNotification('注册成功，请登录', 'success');
                navTo('page-login');
                // 清空注册表单
                document.getElementById('register-name').value = '';
                document.getElementById('register-password').value = '';
                document.getElementById('register-confirm-password').value = '';
            }
        }

        function logout() {
            currentUser = null;
            currentToken = null;
            localStorage.removeItem('auth_token');
            navTo('page-login');
            showNotification('已退出登录', 'info');
        }

        // ================ 用户界面更新 ================
        function updateUserDisplay() {
            if (!currentUser) return;
            
            const nameElements = [
                'user-name-display',
                'video-user-name', 
                'task-user-name',
                'task-user-display'
            ];
            
            nameElements.forEach(id => {
                const element = document.getElementById(id);
                if (element) element.textContent = currentUser.username;
            });
            
            const avatarElements = [
                'user-avatar',
                'video-user-avatar',
                'task-user-avatar',
                'task-page-avatar'
            ];
            
            avatarElements.forEach(id => {
                const element = document.getElementById(id);
                if (element) element.textContent = currentUser.username.charAt(0);
            });
        }

        // ================ 俱乐部功能 ================
        async function loadUserClubs() {
            if (!currentUser) return;
            
            const result = await apiRequest('/clubs/my');
            if (result) {
                renderClubs(result.clubs);
            }
        }

        function renderClubs(clubs) {
            const list = document.getElementById('club-list');
            list.innerHTML = '';
            
            if (!clubs || clubs.length === 0) {
                list.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-users"></i>
                        <h3>暂无俱乐部</h3>
                        <p>${currentUser.role === 'initiator' ? '点击下方按钮创建俱乐部' : '请等待管理员邀请加入俱乐部'}</p>
                    </div>
                `;
                
                if (currentUser.role === 'initiator') {
                    list.innerHTML += `
                        <div style="text-align: center; margin-top: 20px;">
                            <button class="btn btn-primary" onclick="openModal('create-club-modal')">
                                <i class="fas fa-plus"></i> 创建俱乐部
                            </button>
                        </div>
                    `;
                }
                return;
            }
            
            clubs.forEach(club => {
                const roleTag = club.role === 'owner' ? 
                    '<span class="tag" style="background: linear-gradient(135deg, #fff7e6, #ffe7ba); color: #d46b08;">创建者</span>' : 
                    '<span class="tag" style="background: linear-gradient(135deg, #f6ffed, #d9f7be); color: #389e0d;">成员</span>';
                
                list.innerHTML += `
                    <div class="club-card">
                        <h3>${club.name}</h3>
                        <div class="club-tags">
                            <span class="tag">${club.tag}</span>
                            ${roleTag}
                        </div>
                        <p style="color:#666; font-size:14px; margin-bottom:12px; line-height:1.6;">${club.description || '暂无描述'}</p>
                        <div style="font-size:13px; color:#999; margin-bottom:16px; display: flex; align-items: center; gap: 16px;">
                            <span><i class="fas fa-user"></i> 创建者：${club.creatorName}</span>
                            <span><i class="fas fa-users"></i> 成员：${club.memberCount}人</span>
                        </div>
                        <div class="club-actions">
                            <button class="btn btn-primary" style="flex:1" onclick="enterVideoList('${club.id}', '${club.name}')">
                                <i class="fas fa-play-circle"></i> 查看视频
                            </button>
                        </div>
                    </div>
                `;
            });
            
            if (currentUser.role === 'initiator') {
                list.innerHTML += `
                    <div class="club-card" style="text-align: center; display: flex; flex-direction: column; justify-content: center; align-items: center;">
                        <i class="fas fa-plus" style="font-size: 48px; color: #ccc; margin-bottom: 16px;"></i>
                        <h3 style="color: #999; margin-bottom: 12px;">创建新俱乐部</h3>
                        <button class="btn btn-primary" onclick="openModal('create-club-modal')">
                            创建俱乐部
                        </button>
                    </div>
                `;
            } else {
                list.innerHTML += `
                    <div class="club-card" style="text-align: center; display: flex; flex-direction: column; justify-content: center; align-items: center;">
                        <i class="fas fa-search" style="font-size: 48px; color: #ccc; margin-bottom: 16px;"></i>
                        <h3 style="color: #999; margin-bottom: 12px;">寻找更多俱乐部</h3>
                        <button class="btn btn-primary" onclick="openModal('join-club-modal')">
                            加入俱乐部
                        </button>
                    </div>
                `;
            }
        }

        async function createClub() {
            const name = document.getElementById('new-club-name').value.trim();
            const tag = document.getElementById('new-club-tag').value;
            const description = document.getElementById('new-club-desc').value.trim();
            
            if (!name || !tag) {
                showNotification('请填写俱乐部名称和标签', 'error');
                return;
            }
            
            const result = await apiRequest('/clubs', 'POST', {
                name,
                tag,
                description
            });
            
            if (result && result.success) {
                showNotification('俱乐部创建成功', 'success');
                closeModal('create-club-modal');
                loadUserClubs();
                
                // 清空表单
                document.getElementById('new-club-name').value = '';
                document.getElementById('new-club-tag').value = '';
                document.getElementById('new-club-desc').value = '';
            }
        }

        async function searchClubs() {
            const keyword = document.getElementById('search-club-input').value.trim();
            const result = await apiRequest(`/clubs/search?q=${encodeURIComponent(keyword)}`);
            
            if (result) {
                renderSearchResults(result.clubs);
            }
        }

        function renderSearchResults(clubs) {
            const container = document.getElementById('search-results');
            container.innerHTML = '';
            
            if (!clubs || clubs.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #999;">未找到相关俱乐部</p>';
                return;
            }
            
            clubs.forEach(club => {
                container.innerHTML += `
                    <div style="border: 1px solid #eee; border-radius: 8px; padding: 16px; margin-bottom: 12px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                            <strong>${club.name}</strong>
                            <span class="tag">${club.tag}</span>
                        </div>
                        <p style="color: #666; font-size: 14px; margin-bottom: 8px;">${club.description || '暂无描述'}</p>
                        <div style="font-size: 12px; color: #999; display: flex; justify-content: space-between; margin-bottom: 12px;">
                            <span>创建者：${club.creatorName}</span>
                            <span>成员：${club.memberCount}人</span>
                        </div>
                        <div style="text-align: right;">
                            <button class="btn btn-primary btn-sm" onclick="joinClub('${club.id}')">加入俱乐部</button>
                        </div>
                    </div>
                `;
            });
        }

        async function joinClub(clubId) {
            const result = await apiRequest(`/clubs/${clubId}/join`, 'POST');
            if (result && result.success) {
                showNotification('加入俱乐部成功', 'success');
                closeModal('join-club-modal');
                loadUserClubs();
            }
        }

        // ================ 视频功能 ================
        async function enterVideoList(clubId, clubName) {
            currentClubId = clubId;
            currentClubInfo = { id: clubId, name: clubName };
            document.getElementById('club-video-name').textContent = clubName;
            
            const result = await apiRequest(`/clubs/${clubId}/videos`);
            if (result) {
                renderVideos(result.videos);
            }
            navTo('page-videos');
        }

        function renderVideos(videos) {
            const list = document.getElementById('video-list');
            list.innerHTML = '';
            
            if (!videos || videos.length === 0) {
                list.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-video"></i>
                        <h3>暂无视频</h3>
                        <p>该俱乐部暂无教学视频</p>
                    </div>
                `;
                return;
            }
            
            videos.forEach(video => {
                list.innerHTML += `
                    <div class="video-card" onclick="enterTaskPage('${video.id}')">
                        <div class="video-cover">
                            <i class="fas fa-play"></i>
                        </div>
                        <div class="video-info">
                            <div class="video-title">${video.title}</div>
                            <div class="video-meta">
                                <span><i class="fas fa-user"></i> ${video.uploader}</span>
                                <span><i class="far fa-calendar"></i> ${new Date(video.createdAt).toLocaleDateString()}</span>
                            </div>
                        </div>
                    </div>
                `;
            });
        }

        // ================ 任务功能 ================
        async function enterTaskPage(videoId) {
            currentVideoId = videoId;
            
            const videoResult = await apiRequest(`/videos/${videoId}`);
            if (videoResult) {
                currentVideoInfo = videoResult.video;
                document.getElementById('task-video-title').textContent = currentVideoInfo.title;
                document.getElementById('task-video-info').innerHTML = `<i class="far fa-clock"></i> 视频时长：${currentVideoInfo.duration || '未知'}`;
            }
            
            const taskResult = await apiRequest(`/videos/${videoId}/tasks`);
            if (taskResult) {
                renderTasks(taskResult.tasks);
            }
            navTo('page-task');
        }

        function renderTasks(tasks) {
            const list = document.getElementById('taskList');
            list.innerHTML = '';
            
            if (!tasks || tasks.length === 0) {
                list.innerHTML = '<p>该视频还没有任务。</p>';
                return;
            }
            
            tasks.forEach(task => {
                const statusClass = task.completed ? 'task-status-complete' : 'task-status-incomplete';
                const statusText = task.completed ? '已完成 <i class="fas fa-check"></i>' : '未完成';
                
                let actionButtons = '';
                if (task.completed) {
                    actionButtons = `<button class="btn btn-outline" disabled><i class="fas fa-check-circle"></i> 已完成</button>`;
                } else {
                    const platformIcon = task.type === 'watch' ? 'fas fa-video' : 'fas fa-file-alt';
                    const platformName = task.type === 'watch' ? '分秒帧平台' : '石墨文档协同空间';
                    
                    actionButtons = `
                        <div class="action-buttons">
                            <button class="btn btn-primary" onclick="openExternalPlatform('${task.externalLink}', '${task.type}')">
                                <i class="${platformIcon}"></i> 前往${platformName}
                            </button>
                            <button class="btn btn-success" onclick="completeTask('${task.id}', '${task.type}')">
                                <i class="fas fa-check-circle"></i> 标记完成
                            </button>
                        </div>
                    `;
                }
                
                const platformInfo = task.type === 'watch' 
                    ? '<div style="font-size:14px; color:#666; margin-top:8px; display: flex; align-items: center; gap: 6px;"><i class="fas fa-external-link-alt"></i> 将在分秒帧平台观看视频</div>'
                    : '<div style="font-size:14px; color:#666; margin-top:8px; display: flex; align-items: center; gap: 6px;"><i class="fas fa-file-alt"></i> 将在石墨文档协同空间完成笔记</div>';
                
                list.innerHTML += `
                    <div class="task-card-item">
                        <div class="task-card-header">
                            <div class="task-card-title">${task.title}</div>
                            <div class="task-card-status ${statusClass}">${statusText}</div>
                        </div>
                        <div class="task-card-description">
                            ${task.description}
                            ${platformInfo}
                        </div>
                        <div class="task-card-actions">
                            ${actionButtons}
                        </div>
                    </div>
                `;
            });
        }

        function openExternalPlatform(link, type) {
            if (link) {
                window.open(link, '_blank');
                const platformName = type === 'watch' ? '分秒帧平台' : '石墨文档协同空间';
                showTaskNotification(`请在${platformName}完成任务后，返回此页面点击"标记完成"按钮`, 'info');
            }
        }

        async function completeTask(taskId, type) {
            const platformName = type === 'watch' ? '分秒帧平台' : '石墨文档协同空间';
            const confirmMessage = type === 'watch' 
                ? `确认已完成在${platformName}的视频观看任务？`
                : `确认已完成在${platformName}的教研笔记任务？`;
            
            if (!confirm(confirmMessage)) return;
            
            const result = await apiRequest(`/tasks/${taskId}/complete`, 'POST');
            if (result && result.success) {
                const completionMessage = type === 'watch' 
                    ? '视频观看任务已标记为完成！'
                    : '教研笔记任务已标记为完成！';
                showTaskNotification(completionMessage, 'success');
                
                // 重新加载任务
                const taskResult = await apiRequest(`/videos/${currentVideoId}/tasks`);
                if (taskResult) {
                    renderTasks(taskResult.tasks);
                }
            }
        }

        // ================ 表单验证函数 ================
        function checkRegisterName() {
            const name = document.getElementById('register-name').value.trim();
            const nameError = document.getElementById('register-name-error');
            const nameSuccess = document.getElementById('register-name-success');
            
            if (!name) {
                nameError.style.display = 'flex';
                nameSuccess.style.display = 'none';
                return false;
            }
            
            // 用户名长度和格式检查
            if (name.length < 2 || name.length > 20) {
                document.getElementById('register-name-error-text').textContent = '姓名长度应为2-20个字符';
                nameError.style.display = 'flex';
                nameSuccess.style.display = 'none';
                return false;
            }
            
            nameError.style.display = 'none';
            nameSuccess.style.display = 'flex';
            return true;
        }

        function checkPasswordStrength() {
            const password = document.getElementById('register-password').value;
            const strengthBar = document.getElementById('password-strength-bar');
            const passwordError = document.getElementById('register-password-error');
            
            if (!password) {
                strengthBar.style.width = '0';
                passwordError.style.display = 'none';
                return false;
            }
            
            // 计算密码强度
            let strength = 0;
            if (password.length >= 6) strength += 1;
            if (password.length >= 8) strength += 1;
            if (/[a-z]/.test(password)) strength += 1;
            if (/[A-Z]/.test(password)) strength += 1;
            if (/[0-9]/.test(password)) strength += 1;
            if (/[^a-zA-Z0-9]/.test(password)) strength += 1;
            
            // 设置强度条
            let width = 0;
            let className = '';
            
            if (strength <= 2) {
                width = 33;
                className = 'strength-weak';
            } else if (strength <= 4) {
                width = 66;
                className = 'strength-medium';
            } else {
                width = 100;
                className = 'strength-strong';
            }
            
            strengthBar.style.width = width + '%';
            strengthBar.className = 'password-strength-bar ' + className;
            
            // 显示/隐藏错误信息
            passwordError.style.display = password.length > 0 && password.length < 6 ? 'flex' : 'none';
            
            return password.length >= 6;
        }

        function checkPasswordMatch() {
            const password = document.getElementById('register-password').value;
            const confirmPassword = document.getElementById('register-confirm-password').value;
            const confirmError = document.getElementById('register-confirm-error');
            const confirmSuccess = document.getElementById('register-confirm-success');
            
            if (!confirmPassword) {
                confirmError.style.display = 'none';
                confirmSuccess.style.display = 'none';
                return false;
            }
            
            if (password !== confirmPassword) {
                confirmError.style.display = 'flex';
                confirmSuccess.style.display = 'none';
                return false;
            }
            
            confirmError.style.display = 'none';
            confirmSuccess.style.display = 'flex';
            return true;
        }

        function showTaskNotification(message, type) {
            const notification = document.getElementById('taskNotification');
            notification.textContent = message;
            notification.className = `task-notification ${type}`;
            notification.style.display = 'block';
            
            setTimeout(() => {
                notification.style.display = 'none';
            }, 3000);
        }

        // 初始化应用
        init();
    </script>
</body>
</html>